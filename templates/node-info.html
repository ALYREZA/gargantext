
{% block css %}
{% load staticfiles %}

<link rel="stylesheet" href="{% static "css/bootstrap.css" %}">
<link rel="stylesheet" href="{% static "css/bootstrap-theme.min.css" %}">
<link rel="stylesheet" href="{% static "js/libs/jquery/jquery-ui.css" %}" media="screen">

<style>

	.nodeinfo-container {
		margin: 25px;
		padding: 25px;		
	}

	.nodeinfo-elem {
	    border-style: solid;
	    border-width: 1px;	
		margin: 5px;
		padding: 5px;	
	}

	.nodeinfo-head {
		font-size: large;
		margin: 5px;
		padding: 5px;
	}


	.nodeinfo-content {
		margin: 5px;
		padding: 5px;
	}
</style>

{% endblock %}



{% block content %}
{% if node_id %}
<div id="nodeid" style="visibility: hidden;" >{{node_id}}</div>
<div id="hyperdata"></div>
{% endif %}


	<script src="{% static "js/jquery/jquery.min.js" %}" type="text/javascript"></script>
	<script src="{% static "js/libs/jquery/jquery-ui.js" %}" type="text/javascript"></script>

    <script src="{% static "js/libs/jquery/jquery.ba-dotimeout.min.js" %}" type="text/javascript"></script>    
    
    <!--<script src="{% static "js/libs/bootstrap/js/bootstrap.min.js" %}"></script>-->
    <script src="{% static "js/libs/bootstrap/js/bootstrap-modal.js" %}" type="text/javascript"></script>
    <script src="{% static "js/libs/bootstrap/js/bootstrap-hover-dropdown.min.js" %}" type="text/javascript"></script>




    <script type="text/javascript">

    var node_id = $("#nodeid").html()
	var img = '<center><img src="'+window.location.origin+'/static/img/ajax-loader.gif" width="30%"></img></center>';
	$("#hyperdata").html(img);

    $.ajax({
        type: 'GET',
        url: window.location.origin+'/api/nodes/'+node_id,
        //contentType: "application/json",
        //dataType: 'json',
        success : function(data){
        	console.log( window.location.origin+'/api/nodes/'+node_id )
        	jsondata = data.hyperdata
        	console.log(jsondata)
        	var output = ""
        	// if(jsondata.title) output += "Title:<br>"+jsondata.title+"<br>";
        	// if(jsondata.publication_date) output += jsondata.publication_date.split(" ")[0]+"<br><br>";
        	// if(jsondata.authors) output += "Authors:<br>"+jsondata.authors+"<br><br>";
        	// if(jsondata.fields) output += "Keywords:<br>"+jsondata.fields+"<br><br>";
        	// if(jsondata.abstract) output += "Abstract:<br>"+jsondata.abstract+"<br><br>";
        	// <div class='jumbotron'>
        	output += "<div class='nodeinfo-container'>"
        	if(jsondata.title) output += "<div class='nodeinfo-elem'> <div class='nodeinfo-head'>Title</div> <div class='nodeinfo-content'>"+jsondata.title+"</div> </div>";
        	if(jsondata.publication_date) output += "<div class='nodeinfo-elem'> <div class='nodeinfo-head'>Publication Date</div> <div class='nodeinfo-content'>"+jsondata.publication_date.split(" ")[0]+"</div> </div>";
        	if(jsondata.authors && jsondata.authors!="not found") output += "<div class='nodeinfo-elem'> <div class='nodeinfo-head'>Authors</div> <div class='nodeinfo-content'>"+jsondata.authors+"</div> </div>";
       		else {
        		if(jsondata.source) output += "<div class='nodeinfo-elem'> <div class='nodeinfo-head'>Published in</div> <div class='nodeinfo-content'>"+jsondata.source+"</div> </div>";
       		}
        	if(jsondata.fields) output += "<div class='nodeinfo-elem'> <div class='nodeinfo-head'>Keywords</div> <div class='nodeinfo-content'>"+jsondata.fields+"</div> </div>";
        	if(jsondata.abstract) output += "<div class='nodeinfo-elem'> <div class='nodeinfo-head'>Abstract</div> <div class='nodeinfo-content'>"+jsondata.abstract+"</div> </div>";
        	else {
        		if(jsondata.text) output += "<div class='nodeinfo-elem'> <div class='nodeinfo-head'>Abstract</div> <div class='nodeinfo-content'>"+jsondata.text+"</div> </div>";
        	}
        	output += "</div>"

            $("#hyperdata").html(output);
        },
        error: function(){ 
            console.log('Page Not found: getTopPapers()');
        }
    });
    </script>

{% endblock %}
